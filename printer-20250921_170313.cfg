# === Jase â€” Voron 2.4 350 | Octopus Pro v1.2 + EBB42 + Beacon ===
# Klippain-style split; minimal root file.

[include mainsail.cfg]

#[include fluidd.cfg]
[include stealthburner_leds.cfg]

# Core hardware first
[include hardware/mcu.cfg]

# Probe MUST be loaded before steppers (for probe:z_virtual_endstop)
[include features/probe_beacon.cfg]

# Motion + tools
[include hardware/steppers.cfg]
[include hardware/extruder_ebb42.cfg]
[include hardware/heaters_fans_lights.cfg]

# Leveling / mesh
[include features/level_mesh.cfg]

# Macros last
[include macros/macros.cfg]

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[exclude_object]

[display_status]

[force_move]
enable_force_move: true

[firmware_retraction]
retract_length: 0.8
retract_speed: 40
unretract_extra_length: 0
unretract_speed: 40

[idle_timeout]
timeout: 600

# EXP1 / EXP2 pin aliases (for LCDs etc.)
[board_pins]
aliases:
    EXP1_1=PE8,  EXP1_2=PE7,
    EXP1_3=PE9,  EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,
    EXP2_1=PA6,  EXP2_2=PA5,
    EXP2_3=PB1,  EXP2_4=PA4,
    EXP2_5=PB2,  EXP2_6=PA7,
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<5V>

[input_shaper]
#shaper_type_x: mzv
#shaper_freq_x: 64.4
#shaper_type_y: 2hump_ei
#shaper_freq_y: 69.0
    
[gcode_shell_command backup_now]
command: /usr/local/bin/klipper_backup.sh
timeout: 300
verbose: True

[gcode_macro _CLIENT_VARIABLE]
variable_use_custom_pos   : True
variable_custom_park_x    : 175.0   # adjust for your bed size
variable_custom_park_y    : 15.0    # near the front
variable_custom_park_dz   : 10.0    # Z hop when pausing
gcode:

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [beacon model default]
#*# model_coef = 1.5604690144603799,
#*# 	  1.9236482792304697,
#*# 	  0.7975011496438482,
#*# 	  0.3416344943596423,
#*# 	  0.3119369132782865,
#*# 	  0.25705087761956613,
#*# 	  -0.2950729920667951,
#*# 	  -0.3334460392469072,
#*# 	  0.2256869179426437,
#*# 	  0.21370752709733745
#*# model_domain = 1.8613247979841623e-07,1.930084262146232e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 36.470510
#*# model_offset = 0.00000
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 63.6
#*# shaper_type_y = zv
#*# shaper_freq_y = 44.8
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.055869, 0.116309, 0.115995, 0.141203, 0.133892
#*# 	0.128232, 0.111305, 0.058148, 0.055600, 0.025494
#*# 	0.144579, 0.092541, 0.020600, -0.023501, -0.083449
#*# 	0.141663, 0.065284, -0.043554, -0.114056, -0.128771
#*# 	-2.873825, -2.865347, -2.840205, 2503127795726015805397350925222424541117720273394787145834512924144822690561821976141415416999262932323536725501806975305099006322283564225279393864659728797358385642590462914964157136640209392530281787260579901624811520.000000, -2.858870
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 20.0
#*# max_x = 330.0
#*# min_y = 20.0
#*# max_y = 330.0
